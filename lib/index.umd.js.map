{"version":3,"file":"index.umd.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/index.ts"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import './index.scss';\n\nconst W = 40; // 拼图矩形边长\nconst R = 10; // 拼图圆块半径\nconst { PI } = Math;\nlet X = 0;\nlet Y = 0;\n\n/**\n * 滑块实际边长\n */\nconst blockWidth = W + R * 2;\n/**\n * 滑块移动时Y轴坐标痕迹\n */\nconst trail: number[] = [];\n\nexport interface BehaviorOption {\n  /** dom */\n  el: HTMLElement;\n  /** 高度 */\n  height: number;\n  /** 宽度 */\n  width: number;\n  /** 背景图Url */\n  url?: string;\n  /** 验证成功钩子 */\n  onSuccess?: () => void;\n  /** 验证失败钩子 */\n  onFail?: () => void;\n  /** 点击刷新钩子 */\n  onRefresh?: () => void;\n}\n\n/** 获取一个范围内的随机数 */\nconst getRandomNumberByRange = (start: number, end: number) =>\n  Math.round(Math.random() * (end - start) + start);\n\nconst sum = (x: number, y: number) => x + y;\n\nconst square = (x: number) => x * x;\n\nconst addClass = (element: HTMLElement, className: string) => {\n  element.classList.add(className);\n};\n\nconst removeClass = (element: HTMLElement, className: string) => {\n  element.classList.remove(className);\n};\n\nconst setClass = (element: HTMLElement, className: string) => {\n  element.className = className;\n};\n\n/**\n *\n * @param width\n * @param height\n * @returns\n */\nconst createCanvas = (width: number, height: number) => {\n  const canvas = document.createElement('canvas');\n  canvas.width = width;\n  canvas.height = height;\n  return canvas;\n};\n\n/**\n *\n * @param tagName\n * @param className\n * @returns\n */\nconst createElement = (tagName: string, className?: string) => {\n  const element = document.createElement(tagName);\n  if (className) element.className = className;\n  return element;\n};\n\nclass Behavior {\n  protected canvas!: HTMLCanvasElement;\n\n  protected block!: HTMLCanvasElement;\n\n  protected canvasCtx!: CanvasRenderingContext2D;\n\n  protected blockCtx!: CanvasRenderingContext2D;\n\n  protected loadingContainer!: HTMLElement;\n\n  protected sliderMask!: HTMLElement;\n\n  protected sliderIcon!: HTMLElement;\n\n  protected Img!: HTMLImageElement;\n\n  protected config = {} as BehaviorOption;\n\n  constructor(ops: BehaviorOption) {\n    this.config = ops;\n  }\n\n  initDOM() {\n    const { width, height, el } = this.config;\n    const Captcha = createElement('div', 'Captcha');\n    Captcha.style.width = `${width}px`;\n    const canvas = createCanvas(width, height); // 画布\n    const block = createCanvas(width, height); // 滑块\n    setClass(block, 'block');\n    const slider = createElement('div', 'slider');\n    slider.style.width = `${width}px`;\n    const refresh = createElement('div', 'refresh');\n    refresh.onclick = () => {\n      this.reset();\n      if (typeof this.config.onRefresh === 'function') this.config.onRefresh();\n    };\n    const sliderMask = createElement('div', 'slider-Mask');\n    const sliderIcon = createElement('div', 'slider-Icon');\n    sliderIcon.style.pointerEvents = 'none';\n    const span = createElement('span');\n    const text = createElement('span', 'sliderText');\n    text.innerHTML = '向右滑动填充拼图';\n\n    // 增加loading\n    const loadingContainer = createElement('div', 'loadingContainer');\n    loadingContainer.style.width = `${width}px`;\n    loadingContainer.style.height = `${height}px`;\n    const loadingIcon = createElement('div', 'loadingIcon');\n    const loadingText = createElement('span');\n    loadingText.innerHTML = '加载中...';\n    loadingContainer.appendChild(loadingIcon);\n    loadingContainer.appendChild(loadingText);\n\n    el.appendChild(Captcha);\n    Captcha.appendChild(loadingContainer);\n    Captcha.appendChild(canvas);\n    Captcha.appendChild(refresh);\n    Captcha.appendChild(block);\n    Captcha.appendChild(slider);\n    slider.appendChild(text);\n    slider.appendChild(sliderMask);\n    sliderMask.appendChild(sliderIcon);\n    sliderIcon.appendChild(span);\n\n    Object.assign(this, {\n      canvas,\n      block,\n      canvasCtx: canvas.getContext('2d'),\n      blockCtx: block.getContext('2d'),\n      loadingContainer,\n      sliderMask,\n      sliderIcon,\n    });\n  }\n\n  /**\n   * 创建图片实例\n   *\n   * @param onload Image实例onload事件\n   * @returns Image实例\n   */\n  createImg(onload: () => void) {\n    const img = new Image();\n    img.crossOrigin = 'Anonymous';\n    img.onload = onload;\n    img.src = this.config.url || `https://picsum.photos/${this.config.width}/${this.config.height}`;\n    return img;\n  }\n\n  initCanvas() {\n    const { height, width } = this.config;\n    if (!this.canvas || !this.block) return;\n    X = getRandomNumberByRange(W + 10, width - W * 2);\n    Y = getRandomNumberByRange(10 + R * 2, height - (W + 10));\n\n    this.drawCanvas(this.canvasCtx, true);\n    this.drawCanvas(this.blockCtx);\n\n    this.canvasCtx.drawImage(this.Img, 0, 0, width, height);\n    this.blockCtx.drawImage(this.Img, 0, 0, width, height);\n\n    // 滑块实际的Y坐标(减去一个凸起的圆)\n    const _y = Y - R * 2 + 1;\n    const ImageData = this.blockCtx.getImageData(X, _y, blockWidth, blockWidth);\n    this.block.width = blockWidth;\n    this.blockCtx.putImageData(ImageData, 0, _y);\n  }\n\n  /**\n   * 绘制拼图缺口\n   *\n   * @param ctx canvas画布\n   * @param fill  是否使用fill方法 背景图true 滑块false\n   */\n  drawCanvas(ctx: CanvasRenderingContext2D, fill?: boolean) {\n    ctx.beginPath();\n    ctx.moveTo(X, Y);\n    ctx.arc(X + W / 2, Y - R + 2, R, 0.72 * PI, 2.26 * PI);\n    ctx.lineTo(X + W, Y);\n    ctx.arc(X + W + R - 2, Y + W / 2, R, 1.21 * PI, 2.78 * PI);\n    ctx.lineTo(X + W, Y + W);\n    ctx.lineTo(X, Y + W);\n    ctx.arc(X + R - 2, Y + W / 2, R + 0.4, 2.76 * PI, 1.24 * PI, true);\n    ctx.lineTo(X, Y);\n    ctx.lineWidth = 2;\n    ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';\n    ctx.strokeStyle = 'rgba(255, 255, 255, 0.7)';\n    ctx.stroke();\n    ctx.globalCompositeOperation = 'destination-over';\n    if (fill) {\n      ctx.fill();\n    } else {\n      ctx.clip();\n    }\n  }\n\n  /**\n   * 验证是否成功拼图及真人操作\n   *\n   * @returns\n   */\n  verify() {\n    const arr = trail; // 拖动时y轴的移动轨迹\n    const average = arr.reduce(sum) / arr.length; // 均值\n    const deviations = arr.map((x) => x - average);\n    const stddev = Math.sqrt(deviations.map(square).reduce(sum) / arr.length);\n    const left = parseInt(this.block.style.left, 10);\n\n    return {\n      spliced: Math.abs(left - X) < 5,\n      verified: stddev !== 0, // 简单验证拖动轨迹，为零时表示Y轴上下没有波动，可能非人为操作\n    };\n  }\n\n  /**\n   * 拼图移动事件\n   */\n  TouchEvent() {\n    let originX: number;\n    let originY: number;\n    let isMouseDown = false;\n\n    const handleDragStart = (e: TouchEvent) => {\n      console.log('e: ', e);\n      originX = e.touches[0].clientX;\n      originY = e.touches[0].clientY;\n      isMouseDown = true;\n    };\n\n    const handleDragMove = (e: TouchEvent) => {\n      const { width } = this.config;\n      if (!isMouseDown) return;\n      e.preventDefault();\n      const eventX = e.touches[0].clientX;\n      const eventY = e.touches[0].clientY;\n      const moveX = eventX - originX;\n      const moveY = eventY - originY;\n      if (moveX < 0 || moveX + W >= width) return;\n      this.sliderIcon.style.left = `${moveX}px`;\n\n      addClass(this.sliderMask, 'sliderIcon_activer');\n      const blockLeft = ((width - 40 - 20) / (width - 40)) * moveX;\n      this.block.style.left = `${blockLeft}px`;\n\n      this.sliderMask.style.width = `${moveX}px`;\n      trail.push(moveY);\n    };\n\n    const handleDragEnd = (e: TouchEvent) => {\n      if (!isMouseDown) return;\n      isMouseDown = false;\n      const eventX = e.changedTouches[0].clientX;\n      if (eventX === originX) return;\n\n      const { spliced, verified } = this.verify();\n\n      if (spliced && verified) {\n        addClass(this.sliderMask, 'sliderIcon_success');\n        if (typeof this.config.onSuccess === 'function') this.config.onSuccess();\n      } else {\n        addClass(this.sliderMask, 'sliderContainer_fail');\n        setTimeout(() => {\n          this.reset();\n        }, 1000);\n        if (typeof this.config.onFail === 'function') this.config.onFail();\n      }\n    };\n\n    this.sliderIcon.addEventListener('touchstart', handleDragStart, { passive: false });\n    this.block.addEventListener('touchstart', handleDragStart, { passive: false });\n    document.addEventListener('touchmove', handleDragMove, { passive: false });\n    document.addEventListener('touchend', handleDragEnd);\n  }\n\n  /**\n   * 重置拼图\n   * @returns\n   */\n  reset() {\n    const { width, height } = this.config;\n    if (!this.canvas || !this.block) return;\n    // 重置样式\n    setClass(this.sliderMask, 'slider-Mask');\n\n    this.sliderIcon.style.left = `${0}px`;\n    this.sliderMask.style.width = `${0}px`;\n    this.sliderMask.style.left = `${0}px`;\n    this.block.width = width;\n    this.block.style.left = `${0}px`;\n\n    this.loadingContainer.style.display = '';\n    this.sliderIcon.style.pointerEvents = 'none';\n\n    // 清空画布\n    this.canvasCtx.clearRect(0, 0, width, height);\n    this.blockCtx.clearRect(0, 0, width, height);\n\n    // 重新加载图片\n    this.Img.src = this.config.url || `https://picsum.photos/${width}/${height}`;\n  }\n\n  init() {\n    this.initDOM();\n    this.Img = this.createImg(() => {\n      this.initCanvas();\n      this.loadingContainer.style.display = 'none';\n      this.sliderIcon.style.pointerEvents = '';\n    });\n\n    this.TouchEvent();\n  }\n}\n\nexport { Behavior };\n"],"names":[],"mappings":"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"}